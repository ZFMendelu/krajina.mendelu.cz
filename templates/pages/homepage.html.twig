{% extends "base.html.twig" %}

{% block content %}
    <div id="homepage">

{#        {{ dump() }}#}
        {% for block in content.blocks %}
{#            {{ dump(block) }}#}
            {% if (block.id is defined )  %}
                {% set blockid = 'id="'~block.id~'"'  %}
            {% else %}
                {% set blockid = ""  %}
            {% endif %}

            {% if block.type == 'hero'  %}
                <div class="hero" {{ blockid|raw }}>
                    <div class="container-40 ckeditorOutput">
                        <h1 class="h1">
                            KRAJ<span class="green">!</span>NA
                        </h1>
                        {{ block.text|raw }}
                    </div>
                </div>
            {% endif %}

            {% if block.type == 'separator' %}
                <div style="min-height: {{ block.size }}rem" {{ blockid|raw }}>&nbsp;</div>
            {% endif %}

            {% if block.type == 'quote' %}
                <div class="quote" style="background-image: url({{ block.image.thumbnails['2000x1100'] }})" {{ blockid|raw }}>
                    <div class="container-40">
                        {{ block.text|raw }}
                    </div>
                </div>
            {% endif %}

            {% if block.type == 'text' %}
                <div class="text" {{ blockid|raw }}>
                    <div class="container-40 ckeditorOutput">
                        {{ block.text|raw }}
                    </div>
                </div>
            {% endif %}

            {% if block.type == 'opening_hours' %}
                <div class="text" {{ blockid|raw }}>
                    <div class="container-40 ckeditorOutput">
                        {{ block.text_intro|raw }}
                        <div class="row">
                            <div class="col-6">{{ block.text_where|raw }}</div>
                            <div class="col-6">{{ block.text_when|raw }}</div>
                        </div>
                        {{ block.text_end|raw }}
                    </div>
                </div>
            {% endif %}

            {% if block.type == "authors" %}
                <div class="authors" {{ blockid|raw }}>
                    {% for sub_block in block.sub_blocks  %}
                        {% if sub_block.type == 'text' %}
                            <div class="container-40 ckeditorOutput">
                                {{ sub_block.text|raw }}
                            </div>
                        {% endif %}
                        {% if sub_block.type == 'author' %}
                            <img class="author {{ sub_block.size }}" src="{{ sub_block.image.thumbnails['author_'~sub_block.size] }}" alt="">
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}

            {% if block.type == 'map' %}
                <div class="map" {{ blockid|raw }}>
                    <img class="map" src="{{ block.map.thumbnails['map.jpg'] }}" alt="">
                    {% for sub_block in block.sub_blocks_2  %}
                        {% if sub_block.type == 'point' %}
                            {% set page = sulu_content_load(sub_block.link) %}
                            <a class="point" href="{{ page.content.url }}"
                               style="top: {{ sub_block.coor_y }}%; left: {{ sub_block.coor_x }}%; background-color: {{ sub_block.color }}"
                            ></a>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="map-description">
                    <div class="container-40 ckeditorOutput">
                        {{ block.description|raw }}
                    </div>
                </div>
            {% endif %}

            {% if block.type == 'survey_results' %}
                <div class="container-40 survey-results" {{ blockid|raw }} data-key="{{ block.key }}" data-locale="{{ block.locale }}" data-max="{{ block.max_questions }}">
                    <img src="{{ asset("build/website/img/spinner.svg") }}" class="survey-spinner" alt="" style="height: 10rem">
                    <p class="text-center text-comment">Načítám aktuální výsledky</p>
                </div>
                <div class="container-40">
                    <div class="survey-btns">
                        <div class="btn siema-prev">
                            <img src="{{ asset("build/website/img/prev.svg") }}" alt="" style="height: 1.2rem">
                        </div>
                        <a class="btn secondary" href="{{ block.results_url }}" target="_blank">Všechny výsledky</a>
                        <a class="btn primary text-center" href="{{ block.survey_url }}" target="_blank">Vyplnit anketu</a>
                        <div class="btn siema-next">
                            <img src="{{ asset("build/website/img/next.svg") }}" alt="" style="height: 1.2rem">
                        </div>
                    </div>
                </div>
            {% endif %}

        {% endfor %}
    </div>

    <div class="matterport-embed">
        <div class="btn-close">zavřít</div>
        <iframe src="" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('homepage') }}
{% endblock %}
